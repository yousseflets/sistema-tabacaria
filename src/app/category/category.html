<section class="category container">
  <h1>{{ name }}</h1>
  <div *ngIf="loading" class="loading">Carregando produtos...</div>
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <div class="products" *ngIf="!loading">
    <div class="grid">
      <div class="product" *ngFor="let p of visibleProducts">
        <img *ngIf="(p.image || p.raw?.image)" [src]="imageUrl(p)" [alt]="p.name" />
        <div class="meta">
          <div class="brand" *ngIf="p.raw?.brand || p.raw?.brand?.name || p.raw?.brand?.name">{{ p.raw?.brand?.name || p.raw?.brand?.name }}</div>
          <div class="name">{{ p.name }}</div>
          <div class="price">R$ {{ p.price }}</div>
          <button class="btn-add" (click)="addToCart(p)">Adicionar ao carrinho</button>
        </div>
      </div>
    </div>
    <!-- Pagination controls -->
    <div class="pagination" *ngIf="useServerPaging">
      <button class="btn-secondary" [disabled]="serverPage <= 1" (click)="goToPage(serverPage - 1)">Anterior</button>
      <span class="page-info">P치gina {{ serverPage }}{{ serverLastPage ? ' de ' + serverLastPage : '' }}</span>
      <button class="btn-secondary" [disabled]="!hasMore" (click)="goToPage(serverPage + 1)">Pr칩xima</button>
    </div>

    <div class="pagination" *ngIf="!useServerPaging">
      <button class="btn-secondary" [disabled]="currentPage <= 1" (click)="goToPage(currentPage - 1)">Anterior</button>
      <span class="page-info">P치gina {{ currentPage }}</span>
      <button class="btn-secondary" [disabled]="visibleProducts.length >= products.length" (click)="goToPage(currentPage + 1)">Pr칩xima</button>
    </div>
  </div>
</section>
