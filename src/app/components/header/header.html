<header class="site-header">
  <div class="container">
    <div class="logo">
      <a routerLink="/" class="logo-link" aria-label="Ir para Home">
        <img src="/logo.jpg" alt="Tabacaria" class="logo-image" />
      </a>
    </div>
    <nav class="main-nav">
      <a routerLink="/">Home</a>
      <div class="nav-item dropdown" (mouseenter)="openMenu()" (mouseleave)="closeMenuDelayed()" [class.open]="isProductsOpen" (keydown.escape)="closeMenuImmediate()">
        <button
          class="drop-toggle"
          type="button"
          aria-haspopup="true"
          [attr.aria-expanded]="isProductsOpen"
          (click)="isProductsOpen = !isProductsOpen"
          (keydown.enter)="$event.preventDefault(); isProductsOpen = !isProductsOpen"
          (keydown.space)="$event.preventDefault(); isProductsOpen = !isProductsOpen"
          tabindex="0"
        >
          Produtos
        </button>
        <ul class="dropdown-menu" role="menu" [attr.aria-hidden]="!isProductsOpen" (mouseenter)="cancelClose()" (mouseleave)="closeMenuDelayed()">
          <li *ngFor="let c of categories" role="none">
            <a role="menuitem" [routerLink]="['/produtos', c.slug]" (click)="closeMenuImmediate()">{{ c.name }}</a>
          </li>
        </ul>
      </div>
      <a routerLink="/sobre">Sobre</a>
      <a routerLink="/carrinho" class="cart" aria-label="Carrinho">
        <svg class="cart-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="false">
          <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.16 14l.84-2h7.45c.75 0 1.41-.41 1.75-1.03L20.1 6H5.21l-.94-2H0v2h3l3.6 7.59L5.25 13c-.16.35-.25.74-.25 1.14 0 1.1.9 2 2 2h9v-2H7.42l-.26-.72z"/>
        </svg>
        <span class="cart-badge" aria-hidden="true">{{ cartCount }}</span>
      </a>
    </nav>
  </div>
</header>
